// Translation data
const translations = {
    en: {
        // Navigation
        nav_about: "About Us",
        nav_address: "Address",
        nav_participations: "Participations",
        
        // Hero Section
        hero_title: "Welcome to Anatolia Express LLC",
        hero_subtitle: "Your trusted partner in corporate excellence and logistics solutions",
        hero_cta: "Learn More",
        
        // About Section
        about_title: "About Us",
        about_company_title: "Anatolia Express LLC",
        about_description: "Anatolia Express LLC is a leading corporate entity dedicated to providing exceptional services and solutions. With our commitment to excellence and innovation, we have established ourselves as a trusted partner in the industry.",
        feature_1: "Professional Excellence",
        feature_2: "Global Reach",
        feature_3: "Innovative Solutions",
        
        // Address Section
        address_title: "Our Address",
        address_label: "Head Office",
        address_street: "Rruga Luan Haradinaj, H 110",
        address_details: "Floor 3, Nr.6",
        address_city: "Prishtine",
        phone_label: "Phone",
        email_label: "Email",
        
        // Participations Section
        participations_title: "Our Participations",
        participation_1_title: "Strategic Partnerships",
        participation_1_desc: "We maintain strategic partnerships with leading companies across various industries.",
        participation_2_title: "Industry Awards",
        participation_2_desc: "Recognized for excellence in service delivery and innovative business solutions.",
        participation_3_title: "Professional Networks",
        participation_3_desc: "Active member of professional organizations and business networks.",
        participation_4_title: "International Presence",
        participation_4_desc: "Expanding our reach through international collaborations and joint ventures.",
        
        // Footer
        footer_description: "Your trusted corporate partner",
        footer_rights: "All rights reserved.",
        
        // Loading
        loading_text: "Loading...",
        
        // WhatsApp
        whatsapp_text: "Chat with us"
    },
    
    al: {
        // Navigation
        nav_about: "Rreth Nesh",
        nav_address: "Adresa",
        nav_participations: "Pjesëmarrjet",
        
        // Hero Section
        hero_title: "Mirë se vini në Anatolia Express LLC",
        hero_subtitle: "Partneri juaj i besuar në përsosmëri korporative dhe zgjidhje logjistike",
        hero_cta: "Mëso Më Shumë",
        
        // About Section
        about_title: "Rreth Nesh",
        about_company_title: "Anatolia Express LLC",
        about_description: "Anatolia Express LLC është një entitet korporativ lider i përkushtuar për të ofruar shërbime dhe zgjidhje të jashtëzakonshme. Me angazhimin tonë ndaj përsosmërisë dhe inovacionit, ne kemi vendosur veten si një partner i besuar në industri.",
        feature_1: "Përsosmëri Profesionale",
        feature_2: "Rreth Global",
        feature_3: "Zgjidhje Inovative",
        
        // Address Section
        address_title: "Adresa Jonë",
        address_label: "Zyra Qendrore",
        address_street: "Rruga Luan Haradinaj, H 110",
        address_details: "Kati 3, Nr.6",
        address_city: "Prishtinë",
        phone_label: "Telefoni",
        email_label: "Email-i",
        
        // Participations Section
        participations_title: "Pjesëmarrjet Tona",
        participation_1_title: "Partneritete Strategjike",
        participation_1_desc: "Ne mbajmë partneritete strategjike me kompani lider në industri të ndryshme.",
        participation_2_title: "Çmime të Industrisë",
        participation_2_desc: "Të njohur për përsosmëri në ofrimin e shërbimeve dhe zgjidhje inovative biznesi.",
        participation_3_title: "Rrjete Profesionale",
        participation_3_desc: "Anëtar aktiv i organizatave profesionale dhe rrjeteve të biznesit.",
        participation_4_title: "Prezenca Ndërkombëtare",
        participation_4_desc: "Duke zgjeruar rrezen tonë përmes bashkëpunimeve ndërkombëtare dhe sipërmarrjeve të përbashkëta.",
        
        // Footer
        footer_description: "Partneri juaj korporativ i besuar",
        footer_rights: "Të gjitha të drejtat e rezervuara.",
        
        // Loading
        loading_text: "Duke u ngarkuar...",
        
        // WhatsApp
        whatsapp_text: "Bisedoni me ne"
    },
    
    tr: {
        // Navigation
        nav_about: "Hakkımızda",
        nav_address: "Adres",
        nav_participations: "Katılımlar",
        
        // Hero Section
        hero_title: "Anatolia Express LLC'ye Hoş Geldiniz",
        hero_subtitle: "Kurumsal mükemmellik ve lojistik çözümlerinde güvenilir ortağınız",
        hero_cta: "Daha Fazla Öğren",
        
        // About Section
        about_title: "Hakkımızda",
        about_company_title: "Anatolia Express LLC",
        about_description: "Anatolia Express LLC, istisnai hizmetler ve çözümler sağlamaya adanmış önde gelen bir kurumsal kuruluştur. Mükemmellik ve inovasyona olan bağlılığımızla, sektörde güvenilir bir ortak olarak kendimizi kanıtladık.",
        feature_1: "Profesyonel Mükemmellik",
        feature_2: "Küresel Erişim",
        feature_3: "Yenilikçi Çözümler",
        
        // Address Section
        address_title: "Adresimiz",
        address_label: "Genel Merkez",
        address_street: "Rruga Luan Haradinaj, H 110",
        address_details: "Kat 3, No.6",
        address_city: "Priştine",
        phone_label: "Telefon",
        email_label: "E-posta",
        
        // Participations Section
        participations_title: "İştirakler",
        participation_1_title: "Stratejik Ortaklıklar",
        participation_1_desc: "Çeşitli sektörlerdeki önde gelen şirketlerle stratejik ortaklıklar sürdürüyoruz.",
        participation_2_title: "Sektör Ödülleri",
        participation_2_desc: "Hizmet sunumu mükemmelliği ve yenilikçi iş çözümleri ile tanınmaktayız.",
        participation_3_title: "Profesyonel Ağlar",
        participation_3_desc: "Profesyonel organizasyonlar ve iş ağlarının aktif üyesiyiz.",
        participation_4_title: "Uluslararası Varlık",
        participation_4_desc: "Uluslararası işbirlikleri ve ortak girişimler aracılığıyla erişimimizi genişletiyoruz.",
        
        // Footer
        footer_description: "Güvenilir kurumsal ortağınız",
        footer_rights: "Tüm hakları saklıdır.",
        
        // Loading
        loading_text: "Yükleniyor...",
        
        // WhatsApp
        whatsapp_text: "Bizimle sohbet edin"
    }
};

// Current language
let currentLanguage = 'en';

// DOM elements
const flags = document.querySelectorAll('.flag');
const translatableElements = document.querySelectorAll('[data-translate]');

// Language switching function
function switchLanguage(lang) {
    currentLanguage = lang;
    
    // Create loading screen for language switch
    const languageLoadingScreen = document.createElement('div');
    languageLoadingScreen.className = 'language-loading-screen';
    languageLoadingScreen.innerHTML = `
        <div class="loading-content">
            <div class="logo-container">
                <img src="images/Varlık 3@4x-100.jpg" alt="Anatolia Express LLC" class="loading-logo">
            </div>
            <div class="loading-text">
                <h2>${translations[lang].loading_text || 'Loading...'}</h2>
            </div>
            <div class="loading-spinner">
                <div class="spinner"></div>
            </div>
        </div>
    `;
    
    // Style the language loading screen
    languageLoadingScreen.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--white-color);
        border: 3px solid var(--gold-color);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9998;
        opacity: 0;
        transition: opacity 0.3s ease;
        color: var(--text-color);
        box-sizing: border-box;
    `;
    
    document.body.appendChild(languageLoadingScreen);
    
    // Show loading screen
    requestAnimationFrame(() => {
        languageLoadingScreen.style.opacity = '1';
    });
    
    // Update active flag
    flags.forEach(flag => {
        flag.classList.remove('active');
        if (flag.dataset.lang === lang) {
            flag.classList.add('active');
        }
    });
    
    // Update document language attribute
    document.documentElement.lang = lang;
    
    // Translate all elements after showing loading screen
    setTimeout(() => {
        translatableElements.forEach(element => {
            const key = element.dataset.translate;
            if (translations[lang] && translations[lang][key]) {
                element.textContent = translations[lang][key];
            }
        });
        
        // Hide loading screen after translation
        setTimeout(() => {
            languageLoadingScreen.style.opacity = '0';
            setTimeout(() => {
                if (languageLoadingScreen.parentNode) {
                    languageLoadingScreen.parentNode.removeChild(languageLoadingScreen);
                }
            }, 300);
        }, 800); // Show loading screen for 800ms
        
    }, 200);
    
    // Save language preference
    localStorage.setItem('preferredLanguage', lang);
}

// Initialize language switcher
function initLanguageSwitcher() {
    // Check for saved language preference
    const savedLanguage = localStorage.getItem('preferredLanguage');
    if (savedLanguage && translations[savedLanguage]) {
        switchLanguage(savedLanguage);
    }
    
    // Add click listeners to flags
    flags.forEach(flag => {
        flag.addEventListener('click', () => {
            const lang = flag.dataset.lang;
            switchLanguage(lang);
        });
        
        // Add keyboard support
        flag.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                const lang = flag.dataset.lang;
                switchLanguage(lang);
            }
        });
        
        // Make flags focusable
        flag.setAttribute('tabindex', '0');
    });
}

// Smooth scrolling for navigation links
function initSmoothScrolling() {
    const navLinks = document.querySelectorAll('a[href^="#"]');
    
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);
            
            if (targetElement) {
                const headerHeight = document.querySelector('.header').offsetHeight;
                const targetPosition = targetElement.offsetTop - headerHeight - 20;
                
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
}

// Header scroll effect
function initHeaderScrollEffect() {
    const header = document.querySelector('.header');
    let lastScrollTop = 0;
    
    window.addEventListener('scroll', () => {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        if (scrollTop > lastScrollTop && scrollTop > 100) {
            // Scrolling down
            header.style.transform = 'translateY(-100%)';
        } else {
            // Scrolling up
            header.style.transform = 'translateY(0)';
        }
        
        lastScrollTop = scrollTop;
    });
}

// Intersection Observer for animations
function initScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe sections for animation
    const sections = document.querySelectorAll('section');
    sections.forEach(section => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(30px)';
        section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(section);
    });
    
    // Observe cards for staggered animation
    const cards = document.querySelectorAll('.participation-card, .contact-item');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px)';
        card.style.transition = `opacity 0.6s ease ${index * 0.1}s, transform 0.6s ease ${index * 0.1}s`;
        observer.observe(card);
    });
}

// Mobile menu toggle and optimizations
function initMobileMenu() {
    const nav = document.querySelector('.nav');
    const header = document.querySelector('.header');
    
    // Add responsive behavior
    window.addEventListener('resize', () => {
        if (window.innerWidth > 768) {
            nav.style.display = 'block';
        }
        
        // Adjust loading screen for mobile
        adjustLoadingForMobile();
    });
    
    // Mobile touch optimizations
    if ('ontouchstart' in window) {
        document.body.classList.add('touch-device');
        
        // Improve touch interactions for flags
        const flags = document.querySelectorAll('.flag');
        flags.forEach(flag => {
            flag.addEventListener('touchstart', (e) => {
                e.preventDefault();
                flag.classList.add('touch-active');
            });
            
            flag.addEventListener('touchend', (e) => {
                e.preventDefault();
                flag.classList.remove('touch-active');
                const lang = flag.dataset.lang;
                switchLanguage(lang);
            });
        });
    }
}

// Adjust loading screen for mobile devices
function adjustLoadingForMobile() {
    const loadingLogo = document.querySelector('.loading-logo');
    const loadingText = document.querySelector('.loading-text h2');
    
    if (loadingLogo && window.innerWidth <= 480) {
        loadingLogo.style.width = '80px';
    } else if (loadingLogo && window.innerWidth <= 768) {
        loadingLogo.style.width = '120px';
    }
}

// Form validation (if contact form is added later)
function initFormValidation() {
    // Placeholder for future contact form functionality
}

// Loading screen functionality
function initLoadingScreen() {
    const loadingScreen = document.getElementById('loadingScreen');
    const mainContent = document.querySelector('body > *:not(.loading-screen)');
    
    // Hide main content initially
    if (mainContent) {
        const allContent = document.querySelectorAll('body > *:not(.loading-screen)');
        allContent.forEach(element => {
            element.style.opacity = '0';
            element.style.visibility = 'hidden';
        });
    }
    
    // Simulate loading time and hide loading screen
    setTimeout(() => {
        if (loadingScreen) {
            loadingScreen.classList.add('hidden');
            
            // Show main content after loading screen starts hiding
            setTimeout(() => {
                const allContent = document.querySelectorAll('body > *:not(.loading-screen)');
                allContent.forEach(element => {
                    element.style.transition = 'opacity 0.6s ease, visibility 0.6s ease';
                    element.style.opacity = '1';
                    element.style.visibility = 'visible';
                });
                
                // Remove loading screen from DOM after animation
                setTimeout(() => {
                    if (loadingScreen && loadingScreen.parentNode) {
                        loadingScreen.parentNode.removeChild(loadingScreen);
                    }
                }, 600);
            }, 200);
        }
    }, 2500); // Show loading screen for 2.5 seconds
}

// Initialize all functionality when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    // Start loading screen
    initLoadingScreen();
    
    // Initialize other functionality
    setTimeout(() => {
        initLanguageSwitcher();
        initSmoothScrolling();
        initHeaderScrollEffect();
        initScrollAnimations();
        initMobileMenu();
        
        // Add loading class to body
        document.body.classList.add('loaded');
        
        console.log('Anatolia Express LLC website loaded successfully!');
    }, 100);
});

// Handle page visibility change
document.addEventListener('visibilitychange', () => {
    if (document.visibilityState === 'visible') {
        // Refresh animations when page becomes visible
        const elements = document.querySelectorAll('.fade-in');
        elements.forEach(el => {
            el.classList.remove('fade-in');
            setTimeout(() => el.classList.add('fade-in'), 10);
        });
    }
});

// Export functions for potential testing
if (typeof module !== 'undefined' && module.exports) {
    module.exports = {
        switchLanguage,
        translations,
        currentLanguage
    };
}

